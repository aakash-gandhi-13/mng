(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b82b5f9"],{"18ed":function(e,t,a){},"24aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"content"},[e.headerLoading?a("div",{staticClass:"text-center"},[a("i",{staticClass:"fa fa-spinner fa-spin fa-2x"})]):a("div",[a("b-row",[a("b-button",{staticClass:"back-btn ml-2",attrs:{variant:"primary"},on:{click:e.goBack}},[e._v(e._s(e.$t("BACK")))])],1),a("hr",{staticClass:"dashed"}),a("br"),a("b-row",[a("b-col",{staticClass:"padding-level-2"},[a("div",{staticClass:"normal-fs"},[e._v(e._s(e.$t("BULKPROPOSAL")))]),a("div",{staticClass:"normal-fs"},[e._v(e._s(e.$t("PLEASEUNCHECKPROPOSAL")))])])],1),a("br"),a("b-row",{staticClass:"lh-2"},[a("b-col",{staticClass:"title-fs font-weight-bold",attrs:{cols:"12",xl:"4"}},[e._v(e._s(e.expenseItemName))]),a("b-col",{attrs:{cols:"12",xl:"6"}},[a("div",{staticClass:"textColor small-fs float-sm-left float-lg-right"},[e._v(" "+e._s(e.$t("BULKQUOTATIONFORALLCHECKED"))+" ")])]),a("b-col",{attrs:{"align-self":"end",cols:"12",xl:"2"}},[a("div",[a("b-button",{staticClass:"file-selection-btn float-right",attrs:{disabled:!e.isAnySelected,variant:"primary"},on:{click:e.showExpenseConfirmationModal}},[e._v(e._s(e.$t("BATCHTRANSMISSION"))),e.pageLoading?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e()])],1)])],1),a("hr",{staticClass:"dashed"}),e._l(e.messages.type_proposal.data,(function(t,n){return[a("div",{key:t.id,staticClass:"card-margin"},[a("b-row",{staticClass:"font-weight-bold padding-level-1"},[a("b-col",[e._v(e._s(t.subtitle))])],1),e._l(t.notifications,(function(t,o){return a("div",{key:t.id},[a("b-row",{staticClass:"padding-level-2"},[a("b-col",{attrs:{cols:"5",xl:"3"}},[a("b-form-checkbox",{attrs:{id:"checkbox-1"+n+o,size:"sm"},on:{change:e.updateCheckAll},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"notification.checked"}},[e._v(e._s(t.label))])],1),a("b-col",{attrs:{cols:"6",xl:"3"}},[e._v(e._s(t.sublabel))])],1)],1)})),a("hr",{staticClass:"dashed"})],2)]})),a("b-modal",{ref:"proposal-complete-modal",attrs:{id:"proposal-complete-modal","hide-footer":!0,centered:"",variant:"secondary","modal-class":"py-0","body-class":"py-0",size:"lg","footer-class":"border-0","header-class":"border-0 bg-white pd-0","button-size":"sm"},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.cancel;return[a("div",{staticClass:"w-100 d-flex justify-content-end"},[a("b-button",{staticClass:"back-btn close-btn mt-2",attrs:{variant:"primary"},on:{click:n}},[e._v(e._s(e.$t("CLOSE")))])],1)]}}])},[a("b-card",{staticClass:"pop-up-box"},[a("b-row",{},[a("b-col",[a("div",{staticClass:"title-fw mb-3"},[e._v(e._s(e.$t("QUOTATIONSENDTO")))]),a("div",{staticClass:"title-fs mb-3 font-weight-bold"},[e._v(" "+e._s(e.messages.type_proposal.title)+" ")]),a("div",{staticClass:"title-fw mb-2"},e._l(e.messages.type_proposal.data,(function(t){return a("b-row",{key:t.id},[a("b-col",{attrs:{cols:"12"}},e._l(t.notifications,(function(t){return a("b-row",{key:t.id},[t.checked?a("b-col",{attrs:{cols:"4",xl:"3"}},[e._v(e._s(t.label))]):e._e(),t.checked?a("b-col",{attrs:{cols:"8",xl:"3"}},[e._v(e._s(t.sublabel))]):e._e()],1)})),1)],1)})),1)])],1),a("b-row",{staticClass:"title-fs mb-2"},[a("b-col",{attrs:{cols:"9",xl:"7"}},[a("div",{staticClass:"mt-1 float-right"},[a("b-button",{staticClass:"send-btn",attrs:{disabled:e.loading,variant:"primary"},on:{click:e.createQuotationRequest}},[e._v(e._s(e.$t("SEND"))),e.loading?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e()])],1)])],1),a("b-row",[a("b-col",{attrs:{cols:"12",xl:"3"}}),a("b-col",{staticClass:"small-fs mb-2 errorMessage"},[a("span",[e._v(e._s(e.sendMailError))])])],1)],1)],1),a("b-modal",{ref:"proposal-complete-confirmed-modal",attrs:{id:"proposal-complete-confirmed-modal","hide-footer":!0,centered:"",variant:"secondary","modal-class":"py-0","body-class":"py-0",size:"lg","footer-class":"border-0","header-class":"border-0 bg-white pd-0","button-size":"sm","hide-header-close":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.cancel;return[a("div",{staticClass:"w-100 d-flex justify-content-end"},[a("b-button",{staticClass:"back-btn close-btn mt-2",attrs:{variant:"primary"},on:{click:n}},[e._v(e._s(e.$t("CLOSE")))])],1)]}}])},[a("b-card",{staticClass:"pop-up-box"},[a("b-row",[a("b-col",[a("div",{staticClass:"title-fw"},[e._v(e._s(e.$t("QSENTTOSUPPLIER")))]),a("div",{staticClass:"title-fw mb-4"},[e._v(e._s(e.$t("WAITFORANSWER")))]),a("div",{staticClass:"title-fw mb-4"},e._l(e.quotationNotification,(function(t){return a("b-row",{key:t.id},[[a("b-col",{attrs:{cols:"12"}},[e._v(e._s(t.label)+" : "+e._s(e.$t("QREQUESTNO"))+" ["+e._s(t.qNo)+"]")])]],2)})),1),a("div",{staticClass:"title-fw"},[e._v(e._s(e.$t("MENTIONQREQUESTNO")))])])],1)],1)],1)],2)])},o=[],s=(a("8e6e"),a("cadf"),a("456d"),a("ac6a"),a("96cf"),a("3b8d")),i=a("bd86"),r=a("1315"),c=a("3f54"),l=a("2f62"),p=a("2f4e");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}r["Settings"].defaultLocale="ja";var f=c["a"].get("basic"),_={name:"ExpenseConfirmation",components:{},data:function(){return{isAnySelected:!0,messages:{type_proposal:{title:"",data:[]}},status:!0,expenseItemName:"",loading:!1,pageLoading:!1,headerLoading:!1,sendMailError:"",selectedNotification:[],quotationNotification:[{id:1,label:"",qNo:""}]}},computed:d({},Object(l["b"])({selected_expense_item:"getSelectedExpenseItem",userDetails:"getUserDetails"})),mounted:function(){this.getReductionProposalMessagesList()},created:function(){},methods:{goBack:function(){this.$router.push({name:"reduction_proposal_preview"})},createQuotationRequest:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,s,i,r,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.sendMailError="",t=[],this.messages.type_proposal.data.forEach((function(e){for(var a=0;a<e.notifications.length;a++)if(e.notifications[a].checked){var n=e.notifications[a];t.push(n)}})),this.selectedNotification=t,a=[],t.forEach((function(e){var t={reduction_proposal_no:e.reduction_proposal_no,supplier_no:e.supplier_no,person_id:e.person_id,client_no:localStorage.getItem("client_account_no"),client_name:e.client_name,expense_item_nm:c.selected_expense_item.expense_item_nm,del_flg:!1,create_id:localStorage.getItem("client_account_no"),update_id:localStorage.getItem("client_account_no")};a.push(t)})),e.next=9,f.postAPI(p["a"].EVALUATIONCREATEQUOTATION,a);case 9:n=e.sent,o=n.data,o.success?(s=o.data,i=1,r=[],s.forEach((function(e){var t={id:i,label:e.supplier_name,qNo:e.request_quotation_no};i++,r.push(t)})),this.quotationNotification=r,this.sendProposalMessage()):(this.loading=!1,this.sendMailError=this.$t("MAILERRORCONTACTADMIN"));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showExpenseConfirmationModal:function(){this.sendMailError="",this.$refs["proposal-complete-modal"].show()},hideExpenseConfirmationModal:function(){this.$refs["proposal-complete-modal"].hide()},sendProposalMailData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.postAPI(p["a"].MESSAGEREPLY,t);case 2:a=e.sent,n=a.data,this.loading=!1,this.sendMailError="",n.success&&(this.hideExpenseConfirmationModal(),this.showExpenseCompletedConfirmationModal());case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),sendProposalMessage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,s,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selectedNotification,a=[],t.forEach((function(e){a.push(e.reduction_proposal_no)})),n=[],e.next=6,f.postAPI(p["a"].MESSAGEREADINITIALPROPOSAL,{reduction_proposal_no:a});case 6:o=e.sent,s=o.data,s.success?(i=s.data,i.forEach((function(e){var t={message_destination_account_type:e.message_sender_account_type,message_destination_account_no:e.message_sender_account_no,message_destination_person_name:e.message_sender_person_name,message_sender_belongs:r.userDetails.clientCompanyName,message_sender_account_type:e.message_destination_account_type,message_sender_account_no:e.message_destination_account_no,message_sender_person_name:e.message_destination_person_name,message_title:r.$t("MESSAGEREPLYSUBJECT")+e.reduction_proposal_name,message_text:r.userDetails.clientPersonName+r.$t("MESSAGEREPLYCLIENTCONTEXT")+e.reduction_proposal_name+r.$t("MESSAGEREPLYCLIENTCONTEXTFOLLOW"),reduction_proposal_no:e.reduction_proposal_no,reduction_proposal_url:e.reduction_proposal_url,message_sender_icon_path:r.userDetails.icon_path?r.userDetails.icon_path:"",attached_file_flg:!1,del_flg:!1,create_id:localStorage.getItem("client_account_no"),update_id:localStorage.getItem("client_account_no"),message_source:"request_quotation"};n.push(t)})),this.sendProposalMailData(n)):(this.loading=!1,this.sendMailError=this.$t("SENDMAILERROR"));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showExpenseCompletedConfirmationModal:function(){this.$refs["proposal-complete-confirmed-modal"].show()},hideExpenseCompletedConfirmationModal:function(){this.$refs["proposal-complete-confirmed-modal"].hide()},updateCheckAll:function(){var e=this;setTimeout((function(){e.isAnySelected=!1,e.messages.type_proposal.data.forEach((function(t){t.notifications.forEach((function(t){(t.checked||e.isAnySelected)&&(e.isAnySelected=!0)}))}))}),0)},getReductionProposalMessagesList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,s,i,r,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.headerLoading=!0,e.next=3,f.postAPI(p["a"].EVALUATIONREADREDUCTIONPROPOSALCLIENTEXPENSE,{client_no:localStorage.getItem("client_account_no"),accounts_name_cd:this.selected_expense_item.accounts_name_cd,expense_item_cd:this.selected_expense_item.expense_item_cd});case 3:t=e.sent,a=t.data,this.headerLoading=!1,n=a.data,o=[],s=[],i=[],r=1,c=1,this.expenseItemName=this.selected_expense_item.expense_item_nm+this.$t("REDUCTIONPLAN"),n.length>0?(n.forEach((function(e){if("001"==e.reduction_proposal_type){var t={id:r,label:e.supplier_name,sublabel:e.reduction_proposal_name,checked:!0,supplier_no:e.supplier_no,reduction_proposal_no:e.reduction_proposal_no,client_name:e.client_name,person_name:e.person_name,person_id:e.person_id};r++,o.push(t)}else{var a={id:c,label:e.supplier_name,sublabel:e.reduction_proposal_name,checked:!0,supplier_no:e.supplier_no,reduction_proposal_no:e.reduction_proposal_no,client_name:e.client_name,person_name:e.person_name,person_id:e.person_id};c++,s.push(a)}})),l={id:1,subtitle:this.$t("SYSTEMAUTOMATICPROPOSAL"),notifications:o},i.push(l),l={id:2,subtitle:this.$t("SUPPLIERPROPOSAL"),notifications:s},i.push(l),this.messages.type_proposal.data=i,this.messages.type_proposal.title=this.selected_expense_item.expense_item_nm+this.$t("REDUCTIONPLAN")):this.messages.type_proposal.data=[];case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=_,h=(a("f228"),a("2877")),b=Object(h["a"])(m,n,o,!1,null,"01a3c190",null);t["default"]=b.exports},"3f54":function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));a("7f7f");var n=a("3fba"),o=a("2f4e"),s=a("edfa"),i=a("8992"),r=a("41cb"),c=a("d3a4"),l=a("2b0e"),p=function(e){return console.log("error",e),e.response?401===e.request.status&&l["default"].swal.fire({type:"error",text:c["a"].t("UNAUTHORISED"),icon:"error",confirmButtonText:c["a"].t("LOGIN")}).then((function(e){e&&(i["d"].clear(),r["a"].push("/login"))})):l["default"].swal({type:"warning",text:c["a"].t("NETWORKERROR")}),e},u=function(e){var t=o["a"].MLOGIN,a=o["a"].LOGIN,n=o["a"].EVALUATIONUSERMANAGEMENT,r=o["a"].FORGOTPASSWORD,l=o["a"].MFORGOTPASSWORD,p=o["a"].EVALUATIONCLIENTCOSTEXPANSIONITEMLIST,u=o["a"].CLIENTREADCLIENTPOINTINFO,d=o["a"].DASHBOARD,f=o["a"].INTEGRATIONCLIENTDETAILS,_=o["a"].INTEGRATIONREADJOURNALSTATUS,m=o["a"].EVALUATIONEXPENSEITEMCOMPAISON,h=o["a"].INTEGRATIONREFRESHTOKEN,b=o["a"].EVALUATIONCOSTINFOTREELIST,g=o["a"].EVALUATIONCOMPANYJUDGEMENTCOMPARISON,E=o["a"].EVALUATIONEXPENSEITEMCOMPAISON,O=o["a"].EVALUATIONREADEXPENSISYEAR,v=o["a"].EVALUATIONREADYEARLYCOSTINFO;return 200==e.request.status&&e.data.success||e.config.url=="".concat(s["a"].apiUrl).concat(t)||e.config.url=="".concat(s["a"].apiUrl).concat(a)||e.config.url=="".concat(s["a"].apiUrl).concat(r)||e.config.url=="".concat(s["a"].apiUrl).concat(l)||e.config.url=="".concat(s["a"].apiUrl).concat(n)||e.config.url=="".concat(s["a"].apiUrl).concat(p)||e.config.url=="".concat(s["a"].apiUrl).concat(u)||e.config.url=="".concat(s["a"].apiUrl).concat(d)||e.config.url=="".concat(s["a"].apiUrl).concat(f)||e.config.url=="".concat(s["a"].apiUrl).concat(_)||e.config.url=="".concat(s["a"].apiUrl).concat(m)||e.config.url=="".concat(s["a"].apiUrl).concat(h)||e.config.url=="".concat(s["a"].apiUrl).concat(g)||e.config.url=="".concat(s["a"].apiUrl).concat(E)||e.config.url=="".concat(s["a"].apiUrl).concat(O)||e.config.url=="".concat(s["a"].apiUrl).concat(v)||e.config.url=="".concat(s["a"].apiUrl).concat(b)||Object(i["l"])(c["a"].t("ERRORMESSAGE")),e};n["a"].interceptors.response.use((function(e){return u(e)}),(function(e){return p(e)}));var d={getGroupTypes:function(e){return n["a"].post("".concat(o["a"].GROUPTYPESLIST),e)},postAPI:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};return a&&(o=Object(i["a"])()),n["a"].post("".concat(s["a"].apiUrl).concat(e),t,{headers:o})},getAPI:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};return a&&(o=Object(i["a"])()),n["a"].get("".concat(s["a"].apiUrl).concat(e),{params:t,headers:o})},getCourses:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};return t&&(a=Object(i["a"])()),n["a"].get("".concat(o["a"].COURSE),{params:e,headers:a})},putAPI:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};return a&&(o=Object(i["a"])()),n["a"].put("".concat(s["a"].apiUrl).concat(e),t,{headers:o})},deleteAPI:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};return a&&(o=Object(i["a"])()),n["a"].delete("".concat(s["a"].apiUrl).concat(e),{params:t,headers:o})}},f={basic:d},_={get:function(e){return f[e]}}},"454f":function(e,t,a){a("46a7");var n=a("584a").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},"46a7":function(e,t,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"7f7f":function(e,t,a){var n=a("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/,i="name";i in o||a("9e1e")&&n(o,i,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},"85f2":function(e,t,a){e.exports=a("454f")},"8e6e":function(e,t,a){var n=a("5ca1"),o=a("990b"),s=a("6821"),i=a("11e9"),r=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,n=s(e),c=i.f,l=o(n),p={},u=0;while(l.length>u)a=c(n,t=l[u++]),void 0!==a&&r(p,t,a);return p}})},"990b":function(e,t,a){var n=a("9093"),o=a("2621"),s=a("cb7c"),i=a("7726").Reflect;e.exports=i&&i.ownKeys||function(e){var t=n.f(s(e)),a=o.f;return a?t.concat(a(e)):t}},bd86:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("85f2"),o=a.n(n);function s(e,t,a){return t in e?o()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},f228:function(e,t,a){"use strict";var n=a("18ed"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-7b82b5f9.02c31ba9.js.map