(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e8de122"],{"4b93":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-card",{attrs:{id:"personMgmtCard","no-body":""}},[s("b-row",[s("b-col",{attrs:{cols:"12",xl:"1"}},[e._v(" "+e._s(e.$t("EXPENSEITEM"))+" ")]),s("b-col",{staticClass:"d-md-flex justify-content-between input-group",attrs:{cols:"12",xl:"3"}},[s("span",[s("button",{staticClass:"btn-sm btn-custom-color px-1 mr-2 d"},[e._v(" "+e._s(e.$t("REQUIREDBUTTON"))+" ")])]),s("b-form-input",{staticClass:"mr-2",attrs:{placeholder:"",readonly:""},model:{value:e.selectedExpenseItem.expense_item_nm,callback:function(t){e.$set(e.selectedExpenseItem,"expense_item_nm",t)},expression:"selectedExpenseItem.expense_item_nm"}}),s("div",[s("b-button",{attrs:{disabled:e.forUpdate,variant:"primary",size:"sm"},on:{click:function(t){return t.preventDefault(),e.addExpenseItem(t)}}},[e._v(e._s(e.$t("EXPENSEITEMSELECTION")))])],1)],1),s("b-col",{staticClass:"buttonNote mt-2",attrs:{cols:"12",xl:"4"}},[s("span",{staticClass:"mr-2 font-weight-bold"},[e._v(e._s(e.$t("USERMANAGEMENT.SHOW"))+" / "+e._s(e.$t("USERMANAGEMENT.HIDE")))]),s("b-form-radio-group",{attrs:{id:"radio-group-1",options:e.displayOptions,disabled:0==e.forUpdate,size:"sm"},model:{value:e.selectedExpenseItem.del_flg,callback:function(t){e.$set(e.selectedExpenseItem,"del_flg",t)},expression:"selectedExpenseItem.del_flg"}})],1),s("b-col",{attrs:{cols:"12",xl:"4"}},[s("span",{staticClass:"importantNote"},[e._v(e._s(e.$t("USERMANAGEMENTNOTE")))])])],1),s("b-row",{staticClass:"mb-4"},[s("b-col",{attrs:{cols:"12",xl:"1"}}),s("b-col",{attrs:{cols:"12",xl:"9"}},[s("show-errors",{attrs:{control:e.$v.selectedExpenseItem.expense_item_nm,field:e.$t("EXPENSEITEM")}})],1)],1),s("b-row",[s("b-col",{staticClass:"pr-0",attrs:{cols:"12",xl:"1"}},[e._v(" "+e._s(e.$t("SUBJECT"))+" ")]),s("b-col",{staticClass:"d-md-flex justify-content-between input-group",attrs:{cols:"12",xl:"8"}},[s("span",[s("button",{staticClass:"btn-sm float-left btn-custom-color px-1 mr-2"},[e._v(" "+e._s(e.$t("REQUIREDBUTTON"))+" ")])]),s("b-form-input",{staticClass:"mr-2",attrs:{required:!0,placeholder:""},model:{value:e.selectedExpenseItem.userManagementTitle,callback:function(t){e.$set(e.selectedExpenseItem,"userManagementTitle",t)},expression:"selectedExpenseItem.userManagementTitle"}})],1)],1),s("b-row",{staticClass:"mb-4"},[s("b-col",{attrs:{cols:"12",xl:"1"}}),s("b-col",{attrs:{cols:"12",xl:"9"}},[s("show-errors",{attrs:{control:e.$v.selectedExpenseItem.userManagementTitle,field:e.$t("SUBJECT")}})],1)],1),s("b-row",{attrs:{id:"ckeditorUserManagement"}},[s("b-col",{attrs:{cols:"12",xl:"1"}},[e._v(" "+e._s(e.$t("MAILCONTENT"))+" ")]),s("b-col",{staticClass:"d-flex justify-content-start input-group",attrs:{cols:"12",xl:"8"}},[s("div",[s("button",{staticClass:"btn-sm float-left btn-custom-color px-1 mr-2"},[e._v(" "+e._s(e.$t("REQUIREDBUTTON"))+" ")])]),s("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.selectedExpenseItem.userManagement,callback:function(t){e.$set(e.selectedExpenseItem,"userManagement",t)},expression:"selectedExpenseItem.userManagement"}})],1)],1),s("b-row",{staticClass:"mb-4"},[s("b-col",{attrs:{cols:"12",xl:"1"}}),s("b-col",{attrs:{cols:"12",xl:"9"}},[s("show-errors",{attrs:{control:e.$v.selectedExpenseItem.userManagement,field:e.$t("MAILCONTENT")}})],1)],1),s("b-row",[s("b-col",{staticClass:"ml-auto",attrs:{cols:"12",xl:"11"}},[e.forUpdate?s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.updateUserManagement(t)}}},[e._v(e._s(e.$t("UPDATE")))]):s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.createUserManagement(t)}}},[e._v(e._s(e.$t("SAVE")))])],1)],1)],1),s("b-row",[s("b-modal",{ref:"tree-modal",attrs:{id:"tree-modal","hide-footer":!0,centered:"",variant:"secondary","modal-class":"py-0","body-class":"py-0",size:"md","footer-class":"border-0","header-class":"border-0 bg-white pd-0","button-size":"sm","hide-header-close":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.cancel;return[s("div",{staticClass:"title-fs font-weight-bold mt-2 text-dark ml-3"},[e._v(" "+e._s(e.$t("ADDEXPENSEITEM"))+" ")]),s("b-button",{staticClass:"back-btn close-btn mt-2",attrs:{variant:"primary"},on:{click:n}},[e._v(e._s(e.$t("CLOSE")))])]}}])},[s("b-card",[s("b-row",[s("b-col",[s("SubMenuTree",{attrs:{"tree-options":e.treeOptions,treeTitle:e.addExpenseTitle},on:{"update-expense-type":e.updateExpenseItem}})],1)],1)],1),s("b-row",[s("b-col",{staticClass:"text-center mb-2",attrs:{cols:"12"}},[s("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:e.hideModal}},[e._v(e._s(e.$t("ADD"))+" ")])],1)],1)],1)],1)],1)},a=[],r=(s("8e6e"),s("7514"),s("f751"),s("cadf"),s("456d"),s("ac6a"),s("96cf"),s("3b8d")),i=s("bd86"),c=s("3fba"),o=s("2f62"),l=s("1315"),d=s("b5ae"),u=s("3f54"),m=s("d99c"),p=s("c827"),_=s("fb3d"),f=s.n(_),x=s("2f4e");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(s,!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E=u["a"].get("basic");l["Settings"].defaultLocale="ja";var g={name:"AddEdit",components:{SubMenuTree:m["a"],ShowErrors:p["a"]},data:function(){return{forUpdate:!1,addExpenseTitle:"",editData:{},user_management_no:"",allTreeData:[],selectedTreeItem:[],displayOptions:[{value:"0",text:"表示する"},{value:"1",text:"非表示"}],selectedExpenseItem:{expense_item_nm:"",expense_item_cd:"",accounts_name_cd:"",userManagementTitle:"",userManagement:"",del_flg:"0"},expenseItemOptions:[],treeOptions:{checkbox:!1},tabIndex:0,fileName:"",editor:f.a,editorConfig:{language:l["Settings"].defaultLocale,toolbar:{items:["heading","|","bold","italic","bulletedList","numberedList","|","indent","outdent","|","blockQuote","insertTable","mediaEmbed","undo","redo"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}}}},validations:{selectedExpenseItem:{expense_item_nm:{required:d["required"]},userManagementTitle:{required:d["required"]},userManagement:{required:d["required"]}}},computed:h({},Object(o["b"])({selected_expense_item:"getSelectedExpenseItem",userDetails:"getUserDetails"})),watch:{userManagement:function(e){this.$emit("input",e)}},created:function(){this.getTreeData()},mounted:function(){var e=this;console.log(this.displayOptions),this.$route.params.item&&(this.editData=this.$route.params.item,this.forUpdate=void 0!=this.editData.forUpdate&&this.editData.forUpdate,this.user_management_no=this.editData.user_management_no,setTimeout((function(){e.selectedExpenseItem={client_no:e.userDetails.client_no,expense_item_cd:e.editData.expense_item_cd,expense_item_nm:e.editData.expense_item_nm,accounts_name_cd:e.editData.accounts_name_cd,userManagementTitle:e.editData.user_management_title,userManagement:e.editData.user_management,del_flg:"非表示"===e.editData.del_flg?"1":"0"},e.$store.dispatch("updateSelectedExpenseItem",{accounts_name_cd:e.editData.accounts_name_cd,expense_item_cd:e.editData.expense_item_cd,expense_item_nm:e.editData.expense_item_nm})}),0)),this.resetTreeList(),this.getExpenseItemList()},methods:{status:function(e){return{error:e.$error,dirty:e.$dirty}},getTreeData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.postAPI(x["a"].READWITHJOINMEXPENSEITEM,{paginate:!1,limit:5e3,fieldlist:["m_accounts_name.accounts_name_cd","m_accounts_name.accounts_name_nm","m_expense_item.expense_item_cd","m_expense_item.expense_item_nm"],conditions:[{key:"m_accounts_name.use_flg",value:!0}],joins:[{table:"m_accounts_name",join_type:"inner",join_conditions:[{join_using:"m_accounts_name.accounts_name_cd",join_operator:"=",join_with:"m_expense_item.accounts_name_cd"}]}]});case 2:t=e.sent,s=t.data,s.success&&(n=s.data.data,this.allTreeData=n,a=[],r=this._.groupBy(n,"accounts_name_nm"),Object.keys(r).forEach((function(e){var t=[];r[e].forEach((function(e){var s={text:e.expense_item_nm};t.push(s)}));var s={text:e,state:{expanded:!0},children:t};a.push(s)})),this.$store.dispatch("updateTree",a));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),hideModal:function(){this.$refs["tree-modal"].hide()},resetTreeList:function(){this.$store.dispatch("updateSelectedExpenseItem",{accounts_name_cd:"",expense_item_cd:"",expense_item_nm:""})},addExpenseItem:function(){console.log("ppp",this.selectedExpenseItem.del_flg),this.$refs["tree-modal"].show()},updateExpenseItem:function(e){console.log("Check",e),Object.assign(e,{del_flg:this.selectedExpenseItem.del_flg}),this.selectedExpenseItem=e;var t=this._.find(this.allTreeData,{expense_item_nm:e});this.$store.dispatch("updateSelectedExpenseItem",{accounts_name_cd:t.accounts_name_cd,expense_item_cd:t.expense_item_cd,expense_item_nm:t.expense_item_nm}),this.selectedExpenseItem=t,this.selectedExpenseItem.del_flg="0",console.log("Check1",this.selectedExpenseItem)},getExpenseItemList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.postAPI(x["a"].READMEXPENSEITEM,{fieldlist:["accounts_name_cd","expense_item_cd","expense_item_nm"]});case 2:t=e.sent,s=t.data,s.success?(n=s.data,a=[],n.length?(n.forEach((function(e){var t={text:e.expense_item_nm?e.expense_item_nm:"",value:{accounts_name_cd:e.accounts_name_cd?e.accounts_name_cd:"",expense_item_cd:e.expense_item_cd?e.expense_item_cd:""}};a.push(t)})),this.expenseItemOptions=a):this.expenseItemOptions=[]):this.expenseItemOptions=[];case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createUserManagement:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.selectedExpenseItem.$touch(),this.$v.selectedExpenseItem.$invalid){e.next=6;break}return e.next=4,c["a"].post(x["a"].MASTERCREATEDATAMUSERMANAGEMENT,{user_management_title:this.selectedExpenseItem.userManagementTitle,user_management:this.selectedExpenseItem.userManagement,del_flg:0!=this.selectedExpenseItem.del_flg,accounts_name_cd:this.selectedExpenseItem.accounts_name_cd,expense_item_cd:this.selectedExpenseItem.expense_item_cd,update_id:localStorage.getItem("personID"),create_id:localStorage.getItem("personID")});case 4:t=e.sent,t.data.success?this.redirectTOPrev():this.$swal({type:"warning",text:this.$t("NO")+" "+this.$t("CREATED"),timer:2e3});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),redirectTOPrev:function(){this.$router.push({name:"user_management"})},updateUserManagement:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$v.selectedExpenseItem.$touch(),this.$v.selectedExpenseItem.$invalid){e.next=6;break}return e.next=4,c["a"].post(x["a"].MASTERUPDATEMUSERMANAGEMENT,{data:[{user_management_title:this.selectedExpenseItem.userManagementTitle,user_management:this.selectedExpenseItem.userManagement,del_flg:this.selectedExpenseItem.del_flg,accounts_name_cd:this.selectedExpenseItem.accounts_name_cd,expense_item_cd:this.selectedExpenseItem.expense_item_cd,update_id:localStorage.getItem("personID"),create_id:localStorage.getItem("personID")}],conditions:[{key:"user_management_no",value:this.user_management_no}]});case 4:t=e.sent,t.data.success?this.redirectTOPrev():this.$swal({type:"warning",text:this.$t("NO")+" "+this.$t("CREATED"),timer:2e3});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),linkClass:function(e){return this.tabIndex===e?["bg-white","text-black"]:["bg-primary","text-black"]}}},v=g,I=(s("a97a"),s("c557"),s("2877")),T=Object(I["a"])(v,n,a,!1,null,"9c3427b8",null);t["default"]=T.exports},5080:function(e,t,s){},"72a3":function(e,t,s){},"795f":function(e,t,s){"use strict";var n=s("5080"),a=s.n(n);a.a},"7ab8":function(e,t,s){},a97a:function(e,t,s){"use strict";var n=s("72a3"),a=s.n(n);a.a},bca4:function(e,t,s){},c557:function(e,t,s){"use strict";var n=s("7ab8"),a=s.n(n);a.a},d99c:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"min-tree-height",attrs:{id:"subMenuTree"}},[s("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.treeTitle))]),0==e.treeMapedData.length?[s("div",{staticClass:"text-center errorColor"},[e._v(" "+e._s(e.$t("GENRALDATAERRORMESSAGE"))+" ")])]:[s("tree",{attrs:{data:e.treeMapedData,options:e.treeOptions},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return s("span",{staticClass:"tree-text"},[n.hasChildren()?[s("u",[e._v(e._s(n.text))])]:[e.isParentDataSelected?s("b-form-radio",{attrs:{value:n.parent.data.text+n.text,disabled:e.disabled(n.text)},on:{change:function(t){return e.onNodeSelected(n.text,n.parent.data.text)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[s("u",{staticClass:"tree-text pointer",class:{disabled:e.disabled(n.text),"selected-tree-text":e.selected==n.text}},[e._v(" "+e._s(n.text)+" ")])]):s("b-form-radio",{attrs:{value:n.text,disabled:e.disabled(n.text)},on:{change:function(t){return e.onNodeSelected(n.text)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[s("u",{staticClass:"tree-text pointer",class:{disabled:e.disabled(n.text),"selected-tree-text":e.selected==n.text}},[e._v(" "+e._s(n.text)+" ")])])]],2)}}])})]],2)},a=[],r=(s("8e6e"),s("ac6a"),s("cadf"),s("456d"),s("bd86")),i=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(s,!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"SubMenuTree",components:{},inheritAttrs:!1,props:{treeOptions:{type:[Object],default:function(){}},disabledItems:{type:[Array],default:function(){return[]}},treeTitle:{type:String,default:function(){return[]}},industry:{type:Boolean,default:!1},reductionProposal:{type:Boolean,default:!1},isParentDataSelected:{type:Boolean,default:!1}},data:function(){return{selected:""}},computed:o({},Object(i["b"])({treeData:"getTree",industryTreeData:"getIndustryTree",getProposalTreeData:"getReductionProposalTree",selected_expense_item:"getSelectedExpenseItem"}),{treeMapedData:function(){return this.industry?this.industryTreeData:this.reductionProposal?this.getProposalTreeData:this.treeData}}),mounted:function(){this.selected=this.selected_expense_item.expense_item_nm},created:function(){},methods:{disabled:function(e){return-1!=this.disabledItems.indexOf(e)},onNodeSelected:function(e,t){this.disabledItems.indexOf(e)&&this.$emit("update-expense-type",e,t)}}},d=l,u=(s("795f"),s("e940"),s("2877")),m=Object(u["a"])(d,n,a,!1,null,"7362740c",null);t["a"]=m.exports},e940:function(e,t,s){"use strict";var n=s("bca4"),a=s.n(n);a.a}}]);
//# sourceMappingURL=chunk-7e8de122.86f3d8bf.js.map